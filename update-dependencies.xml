<!--
  ~ Copyright LWJGL. All rights reserved.
  ~ License terms: https://www.lwjgl.org/license
  -->

<!-- Downloads LWJGL's library dependencies. -->
<project name="LWJGL" basedir="." default="update-dependencies" xmlns:if="ant:if" xmlns:unless="ant:unless">

    <property name="config" location="config" relative="true"/>
    <import file="${config}/build-definitions.xml" id="defs"/>

    <!-- *********************************** -->
    <property name="kotlinc-version" value="2.3.0"/>

    <property name="jspecify" value="1.0.0"/>
    <property name="testng" value="7.5"/>
        <property name="jcommander" value="1.78"/>
        <property name="jquery" value="3.5.1"/>
        <property name="slf4j" value="1.7.36"/>
    <property name="joml" value="1.10.8"/>
    <property name="jmh-core" value="1.37"/>
        <property name="jmh-generator-annprocess" value="1.37"/>
        <property name="jopt-simple" value="5.0.4"/>
        <property name="commons-math3" value="3.6.1"/>
    <!-- *********************************** -->

    <target name="check-dependencies" description="Updates LWJGL dependencies, if required" unless="${build.offline}">
        <uptodate property="dependencies-uptodate" srcfile="update-dependencies.xml" targetfile="${lib}/touch.txt"/>
        <antcall target="update-dependencies" unless:set="dependencies-uptodate"/>
    </target>

    <target name="update-dependencies" description="Updates LWJGL dependencies" unless="${build.offline}">
        <taskdef name="logLevel" classname="org.lwjgl.SetLogLevel" classpath="${bin.ant}"/>

        <mkdir dir="${lib}/java/kotlinc/lib"/>

        <!-- Kotlin Compiler -->
        <update-mvn name="Jetbrains Annotations" group="org/jetbrains" artifact="annotations" version="26.0.2-1" subfolder="/kotlinc/lib" sources="false"/>
        <update-mvn name="Kotlin Stdlib" group="org/jetbrains/kotlin" artifact="kotlin-stdlib" version="${kotlinc-version}" subfolder="/kotlinc/lib" sources="true"/>
        <update-mvn name="Kotlin Full Reflection" group="org/jetbrains/kotlin" artifact="kotlin-reflect" version="${kotlinc-version}" subfolder="/kotlinc/lib" sources="true"/>
        <update-mvn name="Kotlin Coroutines Support" group="org/jetbrains/kotlinx" artifact="kotlinx-coroutines-core-jvm" version="1.8.0" subfolder="/kotlinc/lib" sources="false"/>
        <update-mvn name="Kotlin Script Runtime" group="org/jetbrains/kotlin" artifact="kotlin-script-runtime" version="${kotlinc-version}" subfolder="/kotlinc/lib" sources="false"/>
        <update-mvn name="Kotlin Compiler" group="org/jetbrains/kotlin" artifact="kotlin-compiler-embeddable" version="${kotlinc-version}" subfolder="/kotlinc" sources="false"/>
        <!--<update-mvn name="Kotlin Scripting Compiler" group="org/jetbrains/kotlin" artifact="kotlin-scripting-compiler-embeddable" version="${kotlinc-version}" subfolder="kotlinc" sources="false"/>-->

        <!-- Other -->
        <update-mvn name="JSpecify" group="org/jspecify" artifact="jspecify" version="${jspecify}"/>
        <update-mvn name="TestNG" group="org/testng" artifact="testng" version="${testng}"/>
        <update-mvn name="JCommander" group="com/beust" artifact="jcommander" version="${jcommander}" sources="false"/>
        <update-mvn name="WebJars - jquery" group="org/webjars" artifact="jquery" version="${jquery}" sources="false"/>
        <update-mvn name="SLF4J API" group="org/slf4j" artifact="slf4j-api" version="${slf4j}" sources="false"/>
        <update-mvn name="SLF4J JDK14" group="org/slf4j" artifact="slf4j-jdk14" version="${slf4j}" sources="false"/>
        <update-mvn name="JOML" group="org/joml" artifact="joml" version="${joml}"/>
        <update-mvn name="JMH Core" group="org/openjdk/jmh" artifact="jmh-core" version="${jmh-core}"/>
        <update-mvn name="JMH Generators: Annotation Processing" group="org/openjdk/jmh" artifact="jmh-generator-annprocess" version="${jmh-generator-annprocess}" sources="false"/>
        <update-mvn name="JOpt Simple" group="net/sf/jopt-simple" artifact="jopt-simple" version="${jopt-simple}" sources="false"/>
        <update-mvn name="Apache Commons Math" group="org/apache/commons" artifact="commons-math3" version="${commons-math3}" sources="false"/>

        <touch file="${lib}/touch.txt" verbose="false"/>
    </target>

    <target name="clean" description="Deletes LWJGL dependencies">
        <delete taskname="Java dependencies" dir="${lib}/java"/>
    </target>

</project>
